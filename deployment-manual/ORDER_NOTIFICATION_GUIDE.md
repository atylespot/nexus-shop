# ЁЯУз ржЕрж░рзНржбрж╛рж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи рж╕рж┐рж╕рзНржЯрзЗржо ржЧрж╛ржЗржб

## ЁЯОп рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржмрж┐ржмрж░ржг

ржПржЗ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржирждрзБржи ржЕрж░рзНржбрж╛рж░ ржЖрж╕рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЕрзНржпрж╛ржбржорж┐ржиржХрзЗ ржЗржорзЗржЗрж▓ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрж╛ржарж╛ржпрж╝ред ржПржЯрж┐ ржжрзБржЯрж┐ ржзрж░ржирзЗрж░ ржЕрж░рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп ржХрж╛ржЬ ржХрж░рзЗ:
- **ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржЕрж░рзНржбрж╛рж░** (Website Orders)
- **рж▓рзНржпрж╛ржирзНржбрж┐ржВ ржкрзЗржЬ ржЕрж░рзНржбрж╛рж░** (Landing Page Orders)

## тЬи ржмрзИрж╢рж┐рж╖рзНржЯрзНржпрж╕ржорзВрж╣

### ЁЯФФ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи
- ржирждрзБржи ржЕрж░рзНржбрж╛рж░ рждрзИрж░рж┐ рж╣ржУржпрж╝рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЗржорзЗржЗрж▓
- ржЕрж░рзНржбрж╛рж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ "ржкрзНрж░рж╕рзЗрж╕рж┐ржВ" ржП ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржЗржорзЗржЗрж▓
- HTML ржПржмржВ ржЯрзЗржХрзНрж╕ржЯ ржлрж░ржорзНржпрж╛ржЯрзЗ рж╕рзБржирзНржжрж░ ржЗржорзЗржЗрж▓

### ЁЯУз ржЗржорзЗржЗрж▓ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи
- **SMTP** рж╕рж╛ржкрзЛрж░рзНржЯ (Gmail, Outlook, etc.)
- **SendGrid** рж╕рж╛ржкрзЛрж░рзНржЯ
- ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ ржлрж┐ржЪрж╛рж░
- ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ UI

### ЁЯОи рж╕рзБржирзНржжрж░ ржЗржорзЗржЗрж▓ ржЯрзЗржоржкрзНрж▓рзЗржЯ
- ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ржпрж╝ рж╕ржорзНржкрзВрж░рзНржг
- ржЕрж░рзНржбрж╛рж░ ржмрж┐ржмрж░ржг рж╕рж╣
- ржЧрзНрж░рж╛рж╣ржХрзЗрж░ рждржерзНржп
- ржкржгрзНржпрзЗрж░ рждрж╛рж▓рж┐ржХрж╛
- ржорзВрж▓рзНржп ржмрж┐ржмрж░ржг
- ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓ рж▓рж┐ржВржХ

## ЁЯЫая╕П рж╕рзЗржЯржЖржк

### 1. ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзБржи

**ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓рзЗ ржпрж╛ржи:**
```
http://localhost:3000/admin/settings/email
```

**SMTP рж╕рзЗржЯржЖржк (Gmail ржЙржжрж╛рж╣рж░ржг):**
```
Host: smtp.gmail.com
Port: 587
User: your-email@gmail.com
Password: your-app-password
From: your-email@gmail.com
Active: тЬЕ
```

**SendGrid рж╕рзЗржЯржЖржк:**
```
API Key: SG.your-sendgrid-api-key
From: verified-sender@yourdomain.com
Active: тЬЕ
```

### 2. ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ ржкрж╛ржарж╛ржи

ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ ржкрзЗржЬрзЗ "Test Email" ржмрж╛ржЯржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ ржкрж╛ржарж╛ржиред

## ЁЯУЛ ржЗржорзЗржЗрж▓ ржЯрзЗржоржкрзНрж▓рзЗржЯ

### ржирждрзБржи ржЕрж░рзНржбрж╛рж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи

**ржмрж┐рж╖ржпрж╝:** `ЁЯЖХ ржирждрзБржи ржЕрж░рзНржбрж╛рж░ #ORD-000001`

**ржЗржорзЗржЗрж▓рзЗ ржпрж╛ ржерж╛ржХржмрзЗ:**
- ЁЯУЛ ржЕрж░рзНржбрж╛рж░ ржмрж┐ржмрж░ржг (ржЕрж░рзНржбрж╛рж░ ржиржорзНржмрж░, ржЖржЗржбрж┐, ржзрж░ржи, рждрж╛рж░рж┐ржЦ)
- ЁЯСд ржЧрзНрж░рж╛рж╣ржХрзЗрж░ рждржерзНржп (ржирж╛ржо, ржлрзЛржи, ржарж┐ржХрж╛ржирж╛)
- ЁЯЫНя╕П ржЕрж░рзНржбрж╛рж░ ржЖржЗржЯрзЗржорж╕ржорзВрж╣ (ржкржгрзНржпрзЗрж░ ржирж╛ржо, ржкрж░рж┐ржорж╛ржг, ржорзВрж▓рзНржп)
- ЁЯТ░ ржорзВрж▓рзНржп ржмрж┐ржмрж░ржг (ржорзЛржЯ ржорзВрж▓рзНржп)
- ЁЯФЧ ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓ рж▓рж┐ржВржХ
- ЁЯТб ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржкрзЗрж░ ржкрж░рж╛ржорж░рзНрж╢

## ЁЯФз ржЯрзЗржХржирж┐ржХрзНржпрж╛рж▓ ржмрж┐ржмрж░ржг

### ржлрж╛ржЗрж▓ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░

```
lib/
тФЬтФАтФА email-service.ts          # ржЗржорзЗржЗрж▓ рж╕рж╛рж░рзНржнрж┐рж╕ ржХрзНрж▓рж╛рж╕
app/api/
тФЬтФАтФА orders/route.ts           # ржЕрж░рзНржбрж╛рж░ API (ржирждрзБржи ржЕрж░рзНржбрж╛рж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи)
тФЬтФАтФА orders/status/route.ts    # рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ API
тФЬтФАтФА landing-page-orders/[id]/status/route.ts  # рж▓рзНржпрж╛ржирзНржбрж┐ржВ ржкрзЗржЬ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕
тФФтФАтФА settings/email/
    тФЬтФАтФА route.ts              # ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ API
    тФФтФАтФА test/route.ts         # ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ API
app/admin/settings/
тФФтФАтФА email/page.tsx            # ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ UI
```

### API ржПржирзНржбржкржпрж╝рзЗржирзНржЯ

#### ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕
```typescript
GET /api/settings/email          # ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ рж▓рзЛржб
POST /api/settings/email         # ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ рж╕рзЗржн
POST /api/settings/email/test    # ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ ржкрж╛ржарж╛ржи
```

#### ржЕрж░рзНржбрж╛рж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи
```typescript
POST /api/orders                 # ржирждрзБржи ржЕрж░рзНржбрж╛рж░ (рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи)
PATCH /api/orders/status         # рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ (ржкрзНрж░рж╕рзЗрж╕рж┐ржВ рж╣рж▓рзЗ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи)
PATCH /api/landing-page-orders/[id]/status  # рж▓рзНржпрж╛ржирзНржбрж┐ржВ ржкрзЗржЬ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕
```

## ЁЯзк ржЯрзЗрж╕рзНржЯрж┐ржВ

### ржЯрзЗрж╕рзНржЯ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржЪрж╛рж▓рж╛ржи
```bash
node test-order-notification.js
```

### ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ ржЯрзЗрж╕рзНржЯ
1. ржирждрзБржи ржЕрж░рзНржбрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи
2. ржЕрж░рзНржбрж╛рж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ "ржкрзНрж░рж╕рзЗрж╕рж┐ржВ" ржП ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи
3. ржЗржорзЗржЗрж▓ ржЗржиржмржХрзНрж╕ ржЪрзЗржХ ржХрж░рзБржи

## ЁЯФН ржЯрзНрж░рж╛ржмрж▓рж╢рзБржЯрж┐ржВ

### ржЗржорзЗржЗрж▓ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ ржирж╛
1. ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ ржЪрзЗржХ ржХрж░рзБржи
2. "Active" ржЪрзЗржХржмржХрзНрж╕ ржЪрзЗржХ ржХрж░рзБржи
3. ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ ржкрж╛ржарж╛ржи
4. ржХржирж╕рзЛрж▓ рж▓ржЧ ржЪрзЗржХ ржХрж░рзБржи

### Gmail ржПрж░ ржЬржирзНржп
1. 2-Factor Authentication ржПржирж╛ржмрж▓ ржХрж░рзБржи
2. App Password рждрзИрж░рж┐ ржХрж░рзБржи
3. App Password ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи (ржирж┐ржпрж╝ржорж┐ржд ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржиржпрж╝)

### SendGrid ржПрж░ ржЬржирзНржп
1. API Key рждрзИрж░рж┐ ржХрж░рзБржи
2. Sender Verification ржХрж░рзБржи
3. Domain Authentication ржХрж░рзБржи

## ЁЯУК рж▓ржЧрж┐ржВ

рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж▓ржЧрж┐ржВ рж░ржпрж╝рзЗржЫрзЗ:

```bash
ЁЯУз Email service initialized successfully
ЁЯУз Order notification sent successfully: message-id
тЭМ Failed to send order notification: error
ЁЯУз Status change notification sent for order: 123
```

## ЁЯФТ рж╕рзБрж░ржХрзНрж╖рж╛

- ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ рж╕рзБрж░ржХрзНрж╖рж┐рждржнрж╛ржмрзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд
- API Key ржЧрзБрж▓рзЛ ржПржиржХрзНрж░рж┐ржкрзНржЯрзЗржб
- ржЗржорзЗржЗрж▓ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи ржкрзНрж░ржпрж╝рзЛржЬржи

## ЁЯУИ ржнржмрж┐рж╖рзНржпржд ржЙржирзНржирждрж┐

- [ ] SMS ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи
- [ ] WhatsApp ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи
- [ ] Push notification
- [ ] ржЗржорзЗржЗрж▓ ржЯрзЗржоржкрзНрж▓рзЗржЯ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬрзЗрж╢ржи
- [ ] ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи рж╢рж┐ржбрж┐ржЙрж▓рж┐ржВ
- [ ] ржЧрзНрж░рж╛рж╣ржХ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи

## ЁЯЖШ рж╕рж╣рж╛ржпрж╝рждрж╛

рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ:
1. ржХржирж╕рзЛрж▓ рж▓ржЧ ржЪрзЗржХ ржХрж░рзБржи
2. ржЗржорзЗржЗрж▓ рж╕рзЗржЯрж┐ржВрж╕ ржнрзЗрж░рж┐ржлрж╛ржЗ ржХрж░рзБржи
3. ржЯрзЗрж╕рзНржЯ ржЗржорзЗржЗрж▓ ржкрж╛ржарж╛ржи
4. ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржХрж╛ржирзЗржХрж╢ржи ржЪрзЗржХ ржХрж░рзБржи

---

**ЁЯУз ржЗржорзЗржЗрж▓ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи рж╕рж┐рж╕рзНржЯрзЗржо рж╕ржлрж▓ржнрж╛ржмрзЗ рж╕рзЗржЯржЖржк рж╣ржпрж╝рзЗржЫрзЗ!**
